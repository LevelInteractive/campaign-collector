!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CampaignCollector=t():e.CampaignCollector=t()}(this,(()=>(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>s});class s{#e="CampaignCollector";#t="1.3.0";#s;#i=null;#n=null;#o={consent:{ad_personalization:{status:null,redacts:[]},ad_storage:{status:null,redacts:[]},ad_user_data:{status:null,redacts:[]},analytics_storage:{status:null,redacts:[]}},crossDomain:null,debug:!1,fieldMap:{anonymous_id:"$ns_anonymous_id",attribution:"$ns_attribution_json",consent:"$ns_consent_json",first:{utm:null,$ns:null},last:{utm:null,$ns:null},cookies:{},globals:{}},fieldTargetMethod:["name"],fieldDataAttribute:"data-campaign-collector",fillOnLoad:!0,filters:{},firstPartyLeadEndpoint:null,firstPartyCookieEndpoint:null,namespace:"lvl",nullValue:"-",paramMap:null,parseRules:{organic:{google:"^www.(google).[a-z]{2,3}(?:.[a-z]{2})?$",bing:"^www.(bing).com$",duckduckgo:"^(duckduckgo).com$",yahoo:"^(?:www|m)?.?(yahoo).(?:com|cn)$",ecosia:"^www.(ecosia).org$",ask:"^www.(ask).com$",aol:"^(?:search.)?(aol).com$",baidu:"^www.(baidu).com$",xfinity:"^my|search.(xfinity).com",yandex:"^(?:www.)?(yandex).com|ru$",lycos:"^(?:www|search)?.?(lycos).[a-z]{2,3}(?:.[a-z]{2})?$"},ai:{chatgpt:"(chatgpt).com$",gemini:"^(gemini).google.com$",claude:".(claude).ai$",perplexity:".(perplexity).ai$",mistral:".(mistral).ai$",copilot:"^(copilot).microsoft.com$"},social:{facebook:"^www.(facebook).com$",instagram:"(instagram).com$",linkedin:"^www.(linkedin).com$",tiktok:"^www.(tiktok).com$",snapchat:"^www.(snapchat).com$",x:"^t.co|x.com$",pinterest:"^www.(pinterest).com$",reddit:"^www.(reddit).com$",quora:"^www.(quora).com$"}},sdk:null,sessionTimeout:null,storageDomain:null,storageMethod:"cookie",storageNamespace:"cc",storeAsBase64:!0,stripUtmsFromInternalLinks:!1,userDataHash:{city:!1,region:!1,postal_code:!1,country:!1}};#a=null;#r=["group","ad","product","feed","creative","extension","geo_int","geo_phy","target","network","device","matchtype","placement"];#c={utm:["source","medium","campaign","term","content","id","source_platform","marketing_tactic","creative_format",...this.#r],hsa:["cam","grp","ad","kw","tgt","net","mt","src"],$ns:["platform","source","campaign_name","campaign",...this.#r]};#l={utm:["source","medium","campaign"],$ns:["campaign","group","ad"]};#h="(redacted)";#u=null;#d=null;#m={first:{expires:[400,"days"]},last:{expires:[30,"minutes"]}};#f;constructor(e={}){s.canRun()&&(console.time(this.#e),this.#f=new URL(window.location.href),this.#i=this.#g(this.#o,e),this.#p(),this.#y(),this.#w(),this.#b(),this.#$(),this.#_(),this.#k(["utm",this.#i.namespace]),this.#S(),Array.isArray(this.#i.sessionTimeout)&&(this.#m.last.expires=this.#i.sessionTimeout),this.#d=this.#O(),this.#C(),this.#i.fillOnLoad&&this.fill(),this.#v(),this.#E("ready",{clean_url:this.#x(),config:this.#i}),console.timeEnd(this.#e))}static canRun(){return"undefined"!=typeof WeakMap&&"undefined"!=typeof URL&&"undefined"!=typeof localStorage&&"undefined"!=typeof DOMParser}static create(e={},t=null){if(!s.canRun())return;const i=new s(e);return window._campaignCollector=window._campaignCollector||{},t&&!window._campaignCollector.hasOwnProperty(t)&&(window._campaignCollector[t]=i),["fill","grab","lead"].reduce(((e,t)=>(e[t]=i[t].bind(i),e)),{})}static consentChange(e,t){if(!["ad_storage","ad_user_data","analytics_storage","ad_personalization"].includes(e))throw new Error("Consent type invalid");if(!["granted","denied",null].includes(t))throw new Error('Consent status must be "granted", "denied", or null');const s="campaign-collector";document.dispatchEvent(new CustomEvent(`${s}:consent.change`,{detail:{type:e,status:t},bubbles:!0})),document.dispatchEvent(new Event(`${s}:${e}.${t}`,{bubbles:!0}))}#$(){const e=`_${this.#i.storageNamespace}_cl`;let t=this.#f.searchParams.get(e);if(this.#i.crossDomain&&t)try{if(t=JSON.parse(atob(t)),"object"!=typeof t||!t)return;for(const[e,s]of Object.entries(t)){let t=this.#i.crossDomain.cookies[e]||[90,"days"];this.#L(e,s,t)}this.#f.searchParams.delete(e),this.#f=new URL(this.#f.href),history.replaceState(null,"",this.#f.href)}catch(e){}}get activeSession(){const e=this.#d.last;if(!e)return null;const t=Math.ceil(Date.now()/1e3);if(e._exp<t)return null;if(e._ref){const t=this.#j(e._ref);return t?{...e,[this.#i.namespace]:t[this.#i.namespace],utm:t.utm}:e}return e}get allowedFields(){return this.#c}get anonymousId(){return this.#A("analytics_storage")?this.#s:this.#h}#M(e){const t=(new TextEncoder).encode(e);return btoa(String.fromCharCode(...t))}#E(e,t={}){dataLayer=window.dataLayer||[];const s={event:`${this.#P(this.#e)}:${e}`,_cc:t};dataLayer.push(s)}set debug(e=!1){e={1:!0,true:!0,0:!1,false:!1}[`${e}`]??!1,this.#i.debug=e,this.#D("Debug",{type:"warn",data:e?"✓":"✗"})}#D(e,{type:t="log",data:s=null}={}){if("function"==typeof console[t]&&(["error","warn"].includes(t)||this.#i.debug))try{console[t](`${this.#e} -`,e,s)}catch(e){}}fill({targetMethod:e,scope:t}={}){e&&!Array.isArray(e)&&(e=[e]);const s={targetMethod:e||this.#i.fieldTargetMethod,scope:t||document},i=this.#N(this.#i.fieldMap),n=this.grab({without:["params"],applyFilters:!0,dereference:!0}),o=(e,t)=>{e.value&&e.value===t||(e.value=t,e.setAttribute("value",e.value),e.dispatchEvent(new Event("input",{bubbles:!1})))};this.#E("fill",{data:n}),["first","last"].forEach((e=>{i[e]&&(i[e]=this.#I(i[e])),n[e]&&(n[e]=this.#I(n[e]))}));for(const[e,t]of Object.entries(i))if("string"!=typeof t)for(const[i,a]of Object.entries(t)){const t=s.scope.querySelectorAll(this.#R(s.targetMethod,a));if(!t?.length)continue;let r=["cookies","globals"].includes(e)?"":this.#i.nullValue,c=n[e][i]??r;Array.from(t).forEach((e=>o(e,c)))}else{let i=t.replace("$ns",this.#i.storageNamespace);const n=s.scope.querySelectorAll(this.#R(s.targetMethod,i));if(n){const t={anonymous_id:this.anonymousId,consent:JSON.stringify(this.#F()),attribution:this.grab({asJson:!0,dereference:!0,without:["params"]})};Array.from(n).forEach((s=>o(s,t[e])))}}}grab({applyFilters:e=!1,asJson:t=!1,dereference:s=!1,without:i=[]}={}){const n={namespace:this.#i.namespace};return i.includes("anonymous_id")||(n.anonymous_id=this.anonymousId),i.includes("params")||(n.params=this.#a),i.includes("first")||(n.first=this.#d.first),i.includes("last")||(n.last=this.#d.last,s&&this.#d.last._ref&&(n.last=Object.assign(this.#d[this.#d.last._ref],n.last))),i.includes("globals")||(n.globals=this.#U({applyFilters:e})),i.includes("cookies")||(n.cookies=this.#z({applyFilters:e})),t?JSON.stringify(n):n}async#T(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map((e=>e.toString(16).padStart(2,"0"))).join("")}lead(e={},t={}){if(!this.#i.firstPartyLeadEndpoint)throw new Error("Endpoint undefined");let s={anonymous_id:this.anonymousId,sent_at:(new Date).getTime(),transport:"beacon",event:"lead",consent:this.#F(),context:{attribution:this.grab({without:["anonymous_id","params","globals"]}),locale:navigator.language,page:{title:document.title,url:location.href,referrer:document.referrer},screen:{width:screen.width,height:screen.height,inner_width:innerWidth,inner_height:innerHeight},sdk:`${this.#e}@${this.#t}`,user_agent:navigator.userAgent}};this.#i.sdk&&(s.context.sdk+=`/${this.#i.sdk}`),Object.keys(e).forEach((t=>{/^[a-z_]+$/.test(t)||(this.#D(`✗ "${t}" != snake_case`,{type:"warn",data:e[t]}),delete e[t])})),Object.keys(e).length>0&&(s.properties=e),["first_name","last_name","email","phone","city","region","postal_code","country","date_of_birth","gender"].forEach((e=>{t[e]&&(s.hasOwnProperty("user")||(s.user={}),s.user[e]=t[e].trim().toLowerCase(),delete t[e])})),this.#J(`https://${this.#i.firstPartyLeadEndpoint}`,s)}async#J(e,t){try{if(t.user){const e=[...Object.keys(this.#i.userDataHash).filter((e=>this.#i.userDataHash[e])),"first_name","last_name","email","phone","date_of_birth","gender"],s={},i={first_name:e=>e.replace(/[^a-z]/g,""),last_name:e=>e.replace(/[^a-z]/g,""),email:e=>{let[t,i]=e.split("@");s.email_domain=i;let n=[e];return["gmail.com","googlemail.com"].includes(i)&&(t=t.replace(/\./g,""),t=t.split("+")[0],n.push(t+"@"+i)),n},phone:e=>{if((e=e.replace(/[^0-9]/g,"")).length<10||e.length>11)return null;if("1"!==e[0]&&11===e.length)return null;const t=[e=10===e.length?`1${e}`:`${e}`,`+${e}`];return s.phone_area_code=e.substring(1,4),t},city:e=>e.replace(/[^a-z]/g,""),postal_code:e=>e.replace(/[^0-9]/g,"").substring(0,5),date_of_birth:e=>{const t=new Date(e);return s.age=`${Math.floor((new Date-t)/315576e5)}`,t.toISOString().split("T")[0].replace("-","")},gender:e=>e.substring(0,1)},n=(await Promise.all(Object.entries(t.user).map((async([t,s])=>{if(!s)return null;if(s.match(/^[0-9a-fA-F]{64}$/))return[t,["email","phone"].includes(t)?[s]:s];let n=i[t]?i[t](s):s;if(!n)return null;if(Array.isArray(n)){const s=await Promise.all(n.map((async s=>e.includes(t)?await this.#T(s):s)));return s.some((e=>e))?[t,s]:null}{const s=e.includes(t)?await this.#T(n):n;return s?[t,s]:null}})))).filter((e=>null!==e));n.length>0?t.user=Object.assign(Object.fromEntries(n),s):t.user={}}const s=JSON.stringify(t);if(navigator.sendBeacon(e,this.#M(s)))return;s=s.replace(`:"${t.transport}"`,':"fetch"');const i=await fetch(e,{method:"POST",body:this.#M(s),keepalive:!0});if(!i.ok)throw new Error(`Status ${i.status}`)}catch(e){throw new Error(`#send(): ${e.message}`)}}#W(e,t){if("function"!=typeof e)return t;try{t=e(t)}catch(e){this.#D("applyFilter:",{type:"error",data:{msg:e.message,value:t}})}return t}#v(){if(this.#i.enableSpaSupport){this.#G();const e=e=>{this.#b(!0),this.#C()};window.addEventListener("popstate",e),window.onpopstate=history.onpushstate=e}document.addEventListener("click",(e=>{const t=e.target.closest("a[href]");if(!t)return;const s=new URL(t.href);if(s.hostname.includes(this.#i.storageDomain)){if(this.#i.stripUtmsFromInternalLinks){if(!s.search.includes("utm_"))return;this.#c.utm.forEach((e=>{s.searchParams.delete(`utm_${e}`)}))}}else{const e=this.#i.crossDomain;if(!e||!e.hostnames.some((e=>s.hostname.includes(e)||s.hostname===e)))return;const t=this.#I(this.activeSession);for(const[e,i]of Object.entries(t))e.startsWith("_")||s.searchParams.set(e,i);if(this.#i.crossDomain.cookies&&"object"==typeof this.#i.crossDomain.cookies){let e=this.grab({without:["params","globals","first","last"]});e.cookies&&(Object.keys(e.cookies).forEach((t=>{e.cookies[t]||delete e.cookies[t]})),e.cookies[`_${this.#i.storageNamespace}_anonymous_id`]=e.anonymous_id),s.searchParams.set(`_${this.#i.storageNamespace}_cl`,btoa(JSON.stringify(e.cookies)))}}t.href=s.href}),!0);const e=((e,t)=>{let s,i=!0;return function(...n){if(i)return i=!1,void e(...n);clearTimeout(s),s=setTimeout((()=>{clearTimeout(s),e(...n)}),t)}})((e=>{const t=e.target.closest("form");t&&this.fill({scope:t})}),1e3);["mousedown","touchstart"].forEach((t=>{document.addEventListener(t,(t=>{e(t),this.#H()}))}));const t=this.#P(this.#e);document.addEventListener(`${t}:consent.change`,(e=>{const{type:t,status:s}=e.detail;this.#K(t,s)})),document.addEventListener(`${t}:analytics_storage.denied`,(e=>{this.#S()}))}#q(e){const t=this.#a[e];if(!Object.keys(t).length)return;const s=this.#l[e];for(const e of s)if(!t.hasOwnProperty(e))return!1;return!0}#z({applyFilters:e=!1}={}){let t={};if(!this.#i.fieldMap.cookies)return t;for(const[s,i]of Object.entries(this.#i.fieldMap.cookies)){let i=this.#B(s);i&&((this.#V("ad_storage",s)||this.#V("analytics_storage",s))&&(i=this.#h),i!==this.#h&&e&&(i=this.#W(this.#i.filters[s],i))),i=this.#Z(i),t[s]=i}return t}#U({applyFilters:e=!1}={}){let t={};for(const[s,i]of Object.entries(this.#i.fieldMap.globals))if(this.#A("analytics_storage")||!s.startsWith("navigator")&&!["screen"].includes(s))try{let i=this.#X(s);if(!i)continue;e&&(i=this.#W(this.#i.filters[s],i)),i=this.#Z(i,{maxLength:1024}),t[s]=i}catch(e){this.#D("resolveGlobal:",{type:"error",data:e.message})}else t[s]=this.#h;return t}#A(e){return{granted:!0,denied:!1,null:!0,null:!0}[this.#i.consent[e].status]}#V(e,t){const s=this.#A(e);return s?!s:this.#i.consent[e].redacts.includes(t)}#K(e,t){this.#i.consent[e].status=t?t.toLowerCase():null}#F(){return Object.entries(this.#i.consent).reduce(((e,[t,s])=>(e[t]=s.status,e)),{})}#N(e){return JSON.parse(JSON.stringify(e))}#g(e,t){for(const s in t)t.hasOwnProperty(s)&&(Array.isArray(t[s])?e[s]=t[s].slice():"object"==typeof t[s]&&null!==t[s]?(e[s]||(e[s]={}),this.#g(e[s],t[s])):e[s]=t[s]);return e}#I(e,t=""){return Object.keys(e).reduce(((s,i)=>{const n=t.length?`${t}_`:"";return"object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?s[`${n}${i}`]=e[i]:Object.assign(s,this.#I(e[i],`${n}${i}`)),s}),{})}#R(e=[],t){return e.map((e=>{const s={class:`input.${t}, textarea.${t}`,parentClass:`.${t} input, .${t} textarea `,dataAttribute:`input[${this.#i.fieldDataAttribute}="${t}"], textarea[${this.#i.fieldDataAttribute}="${t}"]`,name:`input[name="${t}"], textarea[name="${t}"]`};return s[e]||s.name})).join(",")}static getCookie(e){const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?t[2].trim():null}#B(e){return this.constructor.getCookie(e)}#L(e,t,s){const[i,n]=s;document.cookie=`${e}=${t}; max-age=${this.#Q({value:i,units:n})}; path=/; domain=${this.#i.storageDomain}; secure;`}#Y(e){document.cookie=`${e}=; max-age=0; path=/; domain=${this.#i.storageDomain}`}#Q({value:e=0,units:t="minutes"}={}){const s={minutes:60,hours:3600,days:86400,weeks:604800,months:2592e3,years:31536e3}[t.toLowerCase()];return s?parseInt(e)*s:0}#C(){const e=this.#d.last;e&&e._exp<Math.ceil(Date.now()/1e3)&&this.#ee("last");const t=this.#i.namespace;let s={utm:{source:"(direct)",medium:"(none)"}};s[t]={};const i=this.#q("utm"),n=this.#q(t);if(i||n)i&&Object.assign(s.utm,this.#a.utm),n&&Object.assign(s[t],this.#a[t]);else{const e=this.activeSession,i=(e,t)=>!(!e||!this.#l[t])&&this.#l[t].every((s=>e[t]?.[s]&&(!["utm"].includes(t)||"source"===s&&"(direct)"!==e[t][s]||"medium"===s&&"(none)"!==e[t][s]))),n=i(e,"utm"),o=i(e,t);n||o?s=e:Object.assign(s.utm,this.#te())}this.#d?.first?s=this.#d.last&&"(direct)"===s.utm.source?this.#d.last:s:(this.#d.first=s,this.#se("first",s),s={_ref:"first"}),this.#d.last=s,this.#se("last",s)}#G(){this.#D("monkeypatching pushState()",{type:"warn"});let e=history.pushState;history.pushState=function(t){return"function"==typeof history.onpushstate&&history.onpushstate({state:t}),e.apply(history,arguments)}}#te(){let e={};if(!this.#u||this.#u.hostname.indexOf(this.#i.storageDomain)>-1)return e;e={source:this.#u.hostname,medium:"referral"};for(const[t,s]of Object.entries(this.#i.parseRules)){for(const[i,n]of Object.entries(s))if(this.#u.hostname.match(n)){e.source=i,e.medium=`${t}`;break}if(Object.keys(s).indexOf(e.medium)>-1)break}return e}#w(){if(this.#i.storageDomain)return;const e=this.#f.hostname;if("localhost"===e)return"";const t=e.split(".");this.#i.storageDomain=t.length<=2?e:t.slice(-2).join(".")}#X(e){const[t,s]=e.split(".");return s?[t,s].reduce(((e,t)=>e?e[t]:null),window):"window"===t?null:window[t]??null}#ie(e,t=10){let s,i=0;do{s=e;try{e=decodeURIComponent(e),i++}catch(e){break}}while(s!==e&&i<t);return e}#Z(e,{maxLength:t=255}={}){if("string"!=typeof e||!e)return"";let s=String(e).trim();s=this.#ie(s);if(s=(new DOMParser).parseFromString(s,"text/html").body.textContent||"",s.startsWith("{")&&s.endsWith("}"))try{return s=JSON.stringify(JSON.parse(s)),s}catch(e){}return s=s.replace(/['"<>]/g,""),s=s.replace(/[^a-zA-Z0-9_\-%.?@#&+~$!:;,=/|{}\[\]\(\) ]/g,""),(s.startsWith("http")||s.startsWith("/"))&&s.includes("?")&&(s=encodeURI(s)),s=s.slice(0,t),s}#O(){let e={};const t=Math.ceil(Date.now()/1e3);for(const[s,i]of Object.entries(this.#m))e[s]=this.#j(s),"cookie"!==this.#i.storageMethod&&e[s]?._exp<t&&(this.#ee(s),e[s]=null);return e}#S(){const e=`_${this.#i.storageNamespace}_anonymous_id`;if(this.#s=this.#B(e),!this.#A("analytics_storage"))return this.#s=this.#h,void this.#Y(e);this.#s?.startsWith("CC.")||(this.#s=`CC.1.${Date.now()}.${Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}`),"cookie"===this.#i.storageMethod?document.cookie=`${e}=${this.#s}; max-age=${this.#Q({value:400,units:"days"})}; path=/; domain=${this.#i.storageDomain}; secure`:localStorage.setItem(e,this.#s)}#x(){const e=new URL(location.href),t=e.searchParams,s=[];if(t)for(const[e,i]of t.entries())(e.startsWith(`${this.#i.namespace}_`)||e.startsWith("hsa_"))&&s.push(e);return s.forEach((e=>t.delete(e))),this.#n=e.toString(),this.#n}#y(){const e=this.#i.fieldMap;for(const[t,s]of Object.entries(e))if(["first","last"].includes(t))for(const[e,i]of Object.entries(s)){let s={};this.#c[e].forEach((i=>{let n="$ns"===e?this.#i.namespace:e;s[i]=`${n}_${i}`,"first"==t&&(s[i]+="_1st")}));let n=this.#g(s,i);"$ns"===e?(this.#i.fieldMap[t][this.#i.namespace]=n,delete this.#i.fieldMap[t][e]):this.#i.fieldMap[t][e]=n}}#_(){let e=this.#c.$ns,t=this.#l.$ns;this.#c[this.#i.namespace]=e,this.#l[this.#i.namespace]=t,delete this.#c.$ns,delete this.#l.$ns}#k(e=[]){const t=this.#f.searchParams;if(this.#i.paramMap){const e=Array.from(t.keys());for(const s of e){if(!this.#i.paramMap.hasOwnProperty(s))continue;const e=t.get(s);e&&(t.set(this.#i.paramMap[s],e),t.delete(s))}}let s={};e=e.length>0?e:[this.#i.namespace],this.#f.search.includes("hsa_")&&e.push("hsa");for(const t of e)s[t]={};const i="stray";if(s[i]={},t){for(const[n,o]of t.entries()){let t=!1;for(const i of e)if(n.startsWith(i+"_")){const e=n.slice(i.length+1);this.#c[i].includes(e)&&(s[i][e]=this.#Z(o),t=!0);break}t||(s[i][n]=this.#Z(o))}if(s.hasOwnProperty("hsa")){const e={net:"$ns.platform",src:"$ns.network",cam:"$ns.campaign",grp:"$ns.group",ad:"$ns.ad",tgt:"$ns.target",mt:"$ns.matchtype",kw:"utm.term"};for(const[t,i]of Object.entries(s.hsa)){if(!i||!e.hasOwnProperty(t))continue;let[n,o]=e[t].split(".");n=n.replace("$ns",this.#i.namespace),s[n].hasOwnProperty(o)||(s[n][o]="platform"==o?{adwords:"google",facebook:"meta"}[i]??i:i)}delete s.hsa}this.#a=s}else this.#a=s}#b(e=!1){let t;t=e?null:document.referrer?new URL(document.referrer):null,this.#u=t}#ee(e){const t=this.#ne(e);this.#d[e]=null,"cookie"===this.#i.storageMethod?document.cookie=`${t}=; max-age=0; path=/; domain=${this.#i.storageDomain}`:localStorage.removeItem(t)}#j(e){const t=this.#ne(e);let s="cookie"===this.#i.storageMethod?this.#B(t):localStorage.getItem(t);return s?(s.startsWith("$:")&&(s=atob(s.split(":")[1])),s=JSON.parse(s),"null"===s&&(s=null),s):null}#H(){let e=this.#j("last");e&&this.#se("last",e)}#se(e,t){const s=Math.ceil(Date.now()/1e3);t._set||(t._set=s);const[i,n]=this.#m[e].expires,o=this.#Q({value:i,units:n});t._exp=o+s,this.#d[e]=t,t=JSON.stringify(t),this.#i.storeAsBase64&&(t=`$:${btoa(t)}`);const a=this.#ne(e);"cookie"===this.#i.storageMethod?document.cookie=`${a}=${t}; max-age=${o}; path=/; domain=${this.#i.storageDomain}; secure`:localStorage.setItem(a,t)}#p(){let e=this.#i.namespace.toLowerCase().trim();if("lvl"==e)return;[/[a-z]{2,4}/.test(e),"utm"!==e].includes(!1)&&(this.#D("Bad namespace: Reverting to `lvl`",{type:"warn"}),this.#i.namespace="lvl")}#ne(e){return`_${this.#i.storageNamespace}_${e}`}#P(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}return t=t.default})()));