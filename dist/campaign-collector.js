!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CampaignCollector=e():t.CampaignCollector=e()}(this,(()=>(()=>{"use strict";var t={d:(e,i)=>{for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function i(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e,i){n(t,e),e.set(t,i)}function n(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(t,e,i){return t.set(r(t,e),i),i}function a(t,e){return t.get(r(t,e))}function r(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}t.d(e,{default:()=>w});var c=new WeakMap,l=new WeakMap,h=new WeakMap,u=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,d=new WeakSet;class w{static create(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const e=new w(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return t&&!window.hasOwnProperty(t)&&(window[t]=e),["grab","fillFormFields"].reduce(((t,i)=>(t[i]=e[i].bind(e),t)),{})}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e,w;n(e=this,w=d),w.add(e),o(this,c,"CampaignCollector"),o(this,l,null),o(this,h,{cookieDomain:null,decorateHostnames:[],enableSpaSupport:!1,fieldMap:{$json:"campaign_json",last:{utm:null,$ns:null},first:{utm:null,$ns:null},cookies:{},globals:{}},fieldTargetMethod:["name"],fieldDataAttribute:"data-campaign-collector",filters:{},namespace:"lvl",parseRules:{organic:{google:"^www.(google).[a-z]{2,3}(?:.[a-z]{2})?$",bing:"^www.(bing).com$",duckduckgo:"^(duckduckgo).com$",yahoo:"^(?:www|m)?.?(yahoo).(?:com|cn)$",ecosia:"^www.(ecosia).org$",ask:"^www.(ask).com$",aol:"^(?:search.)?(aol).com$",baidu:"^www.(baidu).com$",xfinity:"^my|search.(xfinity).com",yandex:"^(?:www.)?(yandex).com|ru$",lycos:"^(?:www|search)?.?(lycos).[a-z]{2,3}(?:.[a-z]{2})?$"},social:{linkedin:"^www.(linkedin).com$",facebook:"^www.(facebook).com$",twitter:"^t.co$",instagram:"^l.(instagram).com$"}},reportAnomalies:!1,storageMethod:"cookie",storeAsBase64:!1,touchpoints:{last:{enabled:!0,utm:{expires:[30,"minutes"]},$ns:{expires:[30,"minutes"]}},first:{enabled:!0,utm:{expires:[400,"days"]},$ns:{expires:[400,"days"]}}}}),o(this,u,{utm:["source","medium","campaign","term","content","id","source_platform","marketing_tactic","creative_format"],$ns:["platform","source","campaign","group","unit","extension","loc_interest","loc_physical","device","matchtype","placement","position","target","network"]}),o(this,f,{utm:["source","medium"],$ns:["platform","source"]}),o(this,p,null),o(this,m,null),i(this,"params",null),i(this,"session",null),console.time(a(c,this)),this.url=new URL(window.location.href),s(l,this,r(d,this,g).call(this,a(h,this),t)),r(d,this,v).call(this),r(d,this,b).call(this),this.userAgent=navigator.userAgent,r(d,this,$).call(this),r(d,this,k).call(this),r(d,this,M).call(this,["utm",a(l,this).namespace]),s(m,this,r(d,this,j).call(this)),console.timeEnd(a(c,this))}fillFormFields(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.hasOwnProperty("targetMethod")&&(t.targetMethod=Array.isArray(t.targetMethod)?t.targetMethod:[t.targetMethod]);const e={targetMethod:t.targetMethod||this.config.fieldTargetMethod,scope:t.scope||document},i={first:this.session.first,last:this.session.last};for(let t in a(l,this).fieldMap)if(a(l,this).fieldMap.hasOwnProperty(t))for(let n in a(l,this).fieldMap[t]){if(!a(l,this).fieldMap[t].hasOwnProperty(n))continue;let s,r=a(l,this).fieldMap[t][n],c=[];if(e.targetMethod.forEach((t=>{const e={class:"input."+r,parentClass:"."+r+" input",dataAttribute:"input["+a(l,this).fieldDataAttribute+'="'+r+'"]',name:'input[name="'+r+'"]'};c.push(e[t]||e.name)})),s=e.scope.querySelectorAll(c.join(",")),s)for(var o=0;o<s.length;o++)i[t].hasOwnProperty(n)&&""!=i[t][n]&&(s[o].value=i[t][n],s[o].dispatchEvent(new Event("input",{bubbles:!0})))}}grab(){}}function g(t,e){for(const i in e)e.hasOwnProperty(i)&&(Array.isArray(e[i])?t[i]=e[i].slice():"object"==typeof e[i]&&null!==e[i]?(t[i]||(t[i]={}),r(d,this,g).call(this,t[i],e[i])):t[i]=e[i]);return t}function y(t){const e="; ".concat(document.cookie).split("; ".concat(t,"="));if(2===e.length){return e.pop().split(";").shift()}return null}function b(){if(a(l,this).cookieDomain)return;const t=this.url.hostname;if("localhost"===t)return"";const e=t.split(".").reverse();let i=[e[1],e[0]].join(".");e.length>2&&e[1].length<=3&&(i=[e[2],i].join(".")),a(l,this).cookieDomain=i}function v(){const t=a(l,this).fieldMap;for(const[e,i]of Object.entries(t))if(["first","last"].includes(e))for(const[t,o]of Object.entries(i)){let i={};a(u,this)[t].forEach((o=>{let n="$ns"===t?a(l,this).namespace:t;i[o]="".concat(n,"_").concat(o),"first"==e&&(i[o]+="_1st")}));let n=r(d,this,g).call(this,i,o);"$ns"===t?(a(l,this).fieldMap[e][a(l,this).namespace]=n,delete a(l,this).fieldMap[e][t]):a(l,this).fieldMap[e][t]=n}}function k(){let t=a(u,this).$ns;a(u,this)[a(l,this).namespace]=t,delete a(u,this).$ns}function M(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=this.url.searchParams;let i={};t=t.length>0?t:[a(l,this).namespace];for(const e of t)i[e]={};const o="stray";if(i[o]={},e){for(const[n,s]of e.entries()){let e=!1;for(const o of t)if(n.startsWith(o+"_")){const t=n.slice(o.length+1);a(u,this)[o].includes(t)&&(i[o][t]=s,e=!0);break}e||(i[o][n]=s)}this.params=i}else this.params=i}function $(){let t;t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?null:document.referrer?new URL(document.referrer):null,s(p,this,t)}function j(){let t={};const e=a(l,this).touchpoints;for(const o in e){var i;if(!e.hasOwnProperty(o))continue;if(!e[o].enabled)continue;let n="".concat(a(l,this).namespace,"-").concat(o);t[o]=r(d,this,x).call(this,n),(null===(i=t[o])||void 0===i?void 0:i._expires)>=Date.now()&&(r(d,this,O).call(this,n),t[o]=null)}return t}function x(t){const e="_".concat(a(l,this).namespace,"-session-").concat(t);let i="cookie"===a(l,this).storageMethod?r(d,this,y).call(this,e):localStorage.getItem(e);return i&&i.startsWith("base64:")&&(i=atob(i.split(":")[1])),i=JSON.parse(i),i}function O(t){const e="".concat(a(l,this).namespace,"-session-").concat(t);return"cookie"===a(l,this).storageMethod?document.cookie="".concat(e,"=; max-age=0; path=/; domain=").concat(a(l,this).cookieDomain):localStorage.removeItem(e)}return e=e.default})()));